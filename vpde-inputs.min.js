class e extends HTMLElement{constructor(){super(),this.childElementCount&&this.children[0].remove(),this.attachedFrames=this.getAttribute("iframe").split(" ").map((e=>document.getElementById(e))),this.message={},this.host=this.getAttribute("host")||"https://visualpde.com"}sendUpdate(){this.attachedFrames.forEach((e=>{e.contentWindow.postMessage(this.message,this.host)}))}}class t extends e{constructor(){super();const e=document.createElement("span");e.style.setProperty("white-space","nowrap"),e.classList.add("vpde-button"),this.span=e,this.append(e),this.addEventListener("click",this.onclick.bind(this))}onclick(){this.sendUpdate()}}customElements.define("vpde-slider",class extends e{constructor(){super(),this.message.name=this.getAttribute("name"),this.message.type="updateParam";const e=document.createElement("span");e.style.setProperty("white-space","nowrap");if(e.appendChild(document.createElement("span")).innerHTML=this.getAttribute("label")||"",this.getAttribute("min-label")){const t=e.appendChild(document.createElement("span"));t.innerHTML=" "+this.getAttribute("min-label"),t.classList.add("vpde-slider-valLabel")}const t=e.appendChild(document.createElement("input"));if(t.type="range",t.setAttribute("min",this.getAttribute("min")||0),t.setAttribute("max",this.getAttribute("max")||1),t.setAttribute("value",this.getAttribute("value")||.5),t.step=this.getAttribute("step")||(t.max-t.min)/20,t.addEventListener("input",this.onInput.bind(this)),this.getAttribute("max-label")){const t=e.appendChild(document.createElement("span"));t.innerHTML=this.getAttribute("max-label"),t.classList.add("vpde-slider-valLabel")}t.classList.add("vpde-slider"),t.classList.add("slider-progress"),t.style.setProperty("--value",t.value),t.style.setProperty("--min",t.min),t.style.setProperty("--max",t.max),this.slider=t,this.append(e),null!=MathJax.typesetPromise&&MathJax.typesetPromise(),this.attachedFrames.forEach((e=>{e.addEventListener("load",this.sendUpdate.bind(this))}))}onInput(){this.slider.style.setProperty("--value",this.slider.value),this.message.value=this.slider.value,this.sendUpdate()}}),customElements.define("vpde-reset",class extends t{constructor(){super(),this.message.type="resetSim",this.symbol=this.span.appendChild(document.createElement("i")),this.symbol.classList.add("fa-solid","fa-arrow-rotate-left")}}),customElements.define("vpde-playpause",class extends t{constructor(){super(),this.state=this.getAttribute("action")||"play",this.message.type="play"==this.state?"playSim":"pauseSim",this.playWrapper=this.span.appendChild(document.createElement("div"));this.playWrapper.appendChild(document.createElement("i")).classList.add("fa-solid","fa-play"),this.span.append(this.playWrapper),this.pauseWrapper=this.span.appendChild(document.createElement("div"));this.pauseWrapper.appendChild(document.createElement("i")).classList.add("fa-solid","fa-pause"),this.span.append(this.pauseWrapper),this.setDisplay()}onclick(){super.onclick(),"play"==this.state?(this.state="pause",this.message.type="pauseSim"):(this.state="play",this.message.type="playSim"),this.setDisplay()}setDisplay(){"play"==this.state?(this.pauseWrapper.style.display="none",this.playWrapper.style.display="inline-flex"):(this.playWrapper.style.display="none",this.pauseWrapper.style.display="inline-flex")}});