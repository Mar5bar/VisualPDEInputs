class e extends HTMLElement{constructor(){for(super();this.firstChild;)this.removeChild(this.firstChild);this.frameIDs=this.getAttribute("iframe").split(" "),this.message={},this.host=this.getAttribute("host")||"https://visualpde.com"}sendUpdate(){this.frameIDs.forEach((e=>{document.getElementById(e)?.contentWindow.postMessage(this.message,this.host)}))}}class t extends e{constructor(){super();const e=document.createElement("span");e.style.setProperty("white-space","nowrap"),e.classList.add("vpde-button"),this.span=e,this.append(e),this.addEventListener("click",this.onclick.bind(this))}onclick(){this.sendUpdate()}}customElements.define("vpde-slider",class extends e{constructor(){super(),this.message.name=this.getAttribute("name"),this.message.type="updateParam";const e=document.createElement("span");e.style.setProperty("white-space","nowrap");const t=e.appendChild(document.createElement("label"));if(t.innerHTML=this.getAttribute("label")||"",this.getAttribute("min-label")){const e=t.appendChild(document.createElement("span"));e.innerHTML=" "+this.getAttribute("min-label"),e.classList.add("vpde-slider-valLabel")}const s=t.appendChild(document.createElement("input"));s.type="range";const a=this.getAttribute("value")||.5;if(s.min=this.getAttribute("min")||a-.5,s.max=this.getAttribute("max")||a+.5,s.step=this.getAttribute("step")||(s.max-s.min)/20,s.value=a,s.addEventListener("input",this.onInput.bind(this)),this.message.value=s.value,this.getAttribute("max-label")){const t=e.appendChild(document.createElement("span"));t.innerHTML=this.getAttribute("max-label"),t.classList.add("vpde-slider-valLabel")}s.classList.add("vpde-slider"),s.classList.add("slider-progress"),s.style.setProperty("--value",s.value),s.style.setProperty("--min",s.min),s.style.setProperty("--max",s.max),this.slider=s,this.append(e),null!=MathJax.typesetPromise&&MathJax.typesetPromise(),this.frameIDs.forEach((e=>{document.getElementById(e)?.addEventListener("load",this.sendUpdate.bind(this))}))}onInput(){this.slider.style.setProperty("--value",this.slider.value),this.message.value=this.slider.value,this.sendUpdate()}}),customElements.define("vpde-reset",class extends t{constructor(){super(),this.message.type="resetSim",this.symbol=this.span.appendChild(document.createElement("i")),this.symbol.classList.add("fa-solid","fa-arrow-rotate-left")}}),customElements.define("vpde-playpause",class extends t{constructor(){super(),this.state=this.getAttribute("action")||"play",this.message.type="play"==this.state?"playSim":"pauseSim",this.playWrapper=this.span.appendChild(document.createElement("div"));this.playWrapper.appendChild(document.createElement("i")).classList.add("fa-solid","fa-play"),this.span.append(this.playWrapper),this.pauseWrapper=this.span.appendChild(document.createElement("div"));this.pauseWrapper.appendChild(document.createElement("i")).classList.add("fa-solid","fa-pause"),this.span.append(this.pauseWrapper),this.setDisplay()}onclick(){super.onclick(),"play"==this.state?(this.state="pause",this.message.type="pauseSim"):(this.state="play",this.message.type="playSim"),this.setDisplay()}setDisplay(){"play"==this.state?(this.pauseWrapper.style.display="none",this.playWrapper.style.display="inline-flex"):(this.playWrapper.style.display="none",this.pauseWrapper.style.display="inline-flex")}});