class e extends HTMLElement{constructor(){for(super();this.firstChild;)this.removeChild(this.firstChild);this.frameIDs=this.getAttribute("iframe").split(" "),this.message={},this.host=this.getAttribute("host")||"https://visualpde.com"}sendUpdate(){this.frameIDs.forEach((e=>{document.getElementById(e)?.contentWindow.postMessage(this.message,this.host)}))}}class t extends e{constructor(){super();const e=document.createElement("span");e.style.setProperty("white-space","nowrap"),e.classList.add("vpde-button"),this.span=e,this.append(e),this.addEventListener("click",this.onclick.bind(this))}onclick(){this.sendUpdate()}}customElements.define("vpde-slider",class extends e{constructor(){super(),this.message.name=this.getAttribute("name"),this.message.type="updateParam";const e="id"+Math.random().toString(16).slice(2),t=document.createElement("span");if(t.style.setProperty("white-space","nowrap"),this.getAttribute("min-label")){const e=t.appendChild(document.createElement("span"));e.innerHTML=this.getAttribute("min-label"),e.classList.add("vpde-slider-valLabel")}const s=t.appendChild(document.createElement("span"));if(s.style.setProperty("position","relative"),this.getAttribute("label")){const i=s.appendChild(document.createElement("label"));i.innerHTML=this.getAttribute("label"),i.setAttribute("for",e),i.classList.add("vpde-slider-label"),"above"==this.getAttribute("label-position")?(i.classList.add("above"),t.style.setProperty("margin-top","1em")):t.style.setProperty("margin-bottom","1em")}const i=s.appendChild(document.createElement("input"));i.type="range",i.setAttribute("id",e);const a=this.getAttribute("value")||.5;if(i.min=this.getAttribute("min")||a-.5,i.max=this.getAttribute("max")||a+.5,i.step=this.getAttribute("step")||(i.max-i.min)/20,i.value=a,i.addEventListener("input",this.onInput.bind(this)),this.message.value=i.value,this.getAttribute("max-label")){const e=t.appendChild(document.createElement("span"));e.innerHTML=this.getAttribute("max-label"),e.classList.add("vpde-slider-valLabel")}i.classList.add("vpde-slider"),i.classList.add("slider-progress"),i.style.setProperty("--value",i.value),i.style.setProperty("--min",i.min),i.style.setProperty("--max",i.max),this.slider=i,this.append(t),null!=MathJax.typesetPromise&&MathJax.typesetPromise(),this.frameIDs.forEach((e=>{document.getElementById(e)?.addEventListener("load",this.sendUpdate.bind(this))}))}onInput(){this.slider.style.setProperty("--value",this.slider.value),this.message.value=this.slider.value,this.sendUpdate()}}),customElements.define("vpde-reset",class extends t{constructor(){super(),this.message.type="resetSim",this.symbol=this.span.appendChild(document.createElement("i")),this.symbol.classList.add("fa-solid","fa-arrow-rotate-left")}}),customElements.define("vpde-playpause",class extends t{constructor(){super(),this.state=this.getAttribute("action")||"play",this.message.type="play"==this.state?"playSim":"pauseSim",this.playWrapper=this.span.appendChild(document.createElement("div"));this.playWrapper.appendChild(document.createElement("i")).classList.add("fa-solid","fa-play"),this.span.append(this.playWrapper),this.pauseWrapper=this.span.appendChild(document.createElement("div"));this.pauseWrapper.appendChild(document.createElement("i")).classList.add("fa-solid","fa-pause"),this.span.append(this.pauseWrapper),this.setDisplay()}onclick(){super.onclick(),"play"==this.state?(this.state="pause",this.message.type="pauseSim"):(this.state="play",this.message.type="playSim"),this.setDisplay()}setDisplay(){"play"==this.state?(this.pauseWrapper.style.display="none",this.playWrapper.style.display="inline-flex"):(this.playWrapper.style.display="none",this.pauseWrapper.style.display="inline-flex")}});